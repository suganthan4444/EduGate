{"ast":null,"code":"import React,{useEffect,useState}from'react';import'./LearnerProfile.css';import api from'./api';import{useNavigate,Link}from'react-router-dom';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function LearnerProfile(){const learnerId=sessionStorage.getItem('learnerId');const[learnerData,setLearnerData]=useState({});const[loading,setLoading]=useState(true);const[error,setError]=useState(null);const[csrfToken,setCsrfToken]=useState('');const navigate=useNavigate();const confirmLogout=()=>{const userConfirmed=window.confirm('Are you sure you want to log out?');if(userConfirmed){sessionStorage.clear();navigate('/home');}};const linkStyle={textDecoration:'none',color:'inherit'};useEffect(()=>{async function fetchCsrfToken(){try{const response=await api.get('/get-learner-csrf-token/');setCsrfToken(response.data.csrfToken);}catch(error){console.error('Error fetching CSRF token:',error);}}fetchCsrfToken();},[]);useEffect(()=>{async function fetchProfileData(){try{const learnerId=sessionStorage.getItem('learnerId');const response=await api.get(\"/learner-profile/?learnerId=\".concat(learnerId),{headers:{'X-CSRFToken':csrfToken}});setLearnerData(response.data);}catch(err){setError('Failed to fetch profile data. Please try again.');}finally{setLoading(false);}}fetchProfileData();},[csrfToken]);if(loading){return/*#__PURE__*/_jsx(\"div\",{children:\"Loading...\"});}if(error){return/*#__PURE__*/_jsx(\"div\",{children:error});}return/*#__PURE__*/_jsxs(\"div\",{className:\"profile\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"learner-navbar\",children:/*#__PURE__*/_jsxs(\"nav\",{className:\"learner-sidebar\",children:[/*#__PURE__*/_jsxs(\"ul\",{children:[/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(Link,{to:\"/learner-profile/\".concat(learnerId),style:linkStyle,children:\"Your Profile\"})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(Link,{to:\"/learner-courses/\".concat(learnerId),style:linkStyle,children:\"Your Courses\"})})]}),/*#__PURE__*/_jsx(\"button\",{onClick:confirmLogout,children:\"Logout\"})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"profile-container\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"My Profile\"}),/*#__PURE__*/_jsx(\"div\",{className:\"learner-picture\",children:/*#__PURE__*/_jsx(\"img\",{src:learnerData.profile_picture,alt:learnerData.name})}),/*#__PURE__*/_jsxs(\"div\",{className:\"profile-field\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Name:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:learnerData.name,readOnly:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"profile-field\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Date of Birth:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:learnerData.dob,readOnly:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"profile-field\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Email:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:learnerData.email,readOnly:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"profile-field\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Mobile Number:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:learnerData.mobile_no,readOnly:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"profile-field\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Highest Qualification:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"highest_qualification\",value:learnerData.highest_qualification,readOnly:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"profile-field\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Username:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"username\",value:learnerData.username,readOnly:true})]})]})]});}export default LearnerProfile;","map":{"version":3,"names":["React","useEffect","useState","api","useNavigate","Link","jsx","_jsx","jsxs","_jsxs","LearnerProfile","learnerId","sessionStorage","getItem","learnerData","setLearnerData","loading","setLoading","error","setError","csrfToken","setCsrfToken","navigate","confirmLogout","userConfirmed","window","confirm","clear","linkStyle","textDecoration","color","fetchCsrfToken","response","get","data","console","fetchProfileData","concat","headers","err","children","className","to","style","onClick","src","profile_picture","alt","name","type","value","readOnly","dob","email","mobile_no","highest_qualification","username"],"sources":["D:/Sugu/Study Zone/Coding/Code/Projects/Coapps/Final Project/Project EduGate/react-project/src/LearnerProfile.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport './LearnerProfile.css';\r\nimport api from './api';\r\nimport { useNavigate, Link } from 'react-router-dom';\r\n\r\nfunction LearnerProfile() {\r\n    const learnerId = sessionStorage.getItem('learnerId');\r\n    const [learnerData, setLearnerData] = useState({});\r\n    const [loading, setLoading] = useState(true);\r\n    const [error, setError] = useState(null);\r\n    const [csrfToken, setCsrfToken] = useState('');\r\n    const navigate = useNavigate();\r\n\r\n    const confirmLogout = () => {\r\n        const userConfirmed = window.confirm('Are you sure you want to log out?');\r\n        if (userConfirmed) {\r\n            sessionStorage.clear();\r\n            navigate('/home');\r\n        }\r\n    };\r\n\r\n    const linkStyle = {\r\n        textDecoration: 'none',\r\n        color: 'inherit',\r\n    };\r\n\r\n    useEffect(() => {\r\n        async function fetchCsrfToken() {\r\n            try {\r\n                const response = await api.get('/get-learner-csrf-token/');\r\n                setCsrfToken(response.data.csrfToken);\r\n            } catch (error) {\r\n                console.error('Error fetching CSRF token:', error);\r\n            }\r\n        }\r\n\r\n        fetchCsrfToken();\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        async function fetchProfileData() {\r\n            try {\r\n                const learnerId = sessionStorage.getItem('learnerId');\r\n                const response = await api.get(`/learner-profile/?learnerId=${learnerId}`,{headers: {\r\n                    'X-CSRFToken': csrfToken,\r\n                }});\r\n                setLearnerData(response.data);\r\n            } catch (err) {\r\n                setError('Failed to fetch profile data. Please try again.');\r\n            } finally {\r\n                setLoading(false);\r\n            }\r\n        }\r\n\r\n        fetchProfileData();\r\n    }, [csrfToken]);\r\n\r\n\r\n\r\n\r\n    if (loading) {\r\n        return <div>Loading...</div>;\r\n    }\r\n\r\n    if (error) {\r\n        return <div>{error}</div>;\r\n    }\r\n\r\n    return (\r\n        <div className='profile'>\r\n        <div className='learner-navbar'>\r\n            <nav className=\"learner-sidebar\">\r\n                <ul>\r\n                    <li>\r\n                        <Link to={`/learner-profile/${learnerId}`} style={linkStyle}>Your Profile</Link>\r\n                    </li>\r\n                    <li>\r\n                        <Link to={`/learner-courses/${learnerId}`} style={linkStyle}>Your Courses</Link>\r\n                    </li>\r\n                </ul>\r\n                <button onClick={confirmLogout}>Logout</button>\r\n            </nav>\r\n            </div>\r\n        <div className=\"profile-container\">\r\n            <h2>My Profile</h2>\r\n            <div className='learner-picture'><img src={learnerData.profile_picture} alt={learnerData.name}></img></div>\r\n            <div className=\"profile-field\">\r\n                <label>Name:</label>\r\n                <input type=\"text\" value={learnerData.name} readOnly />\r\n            </div>\r\n            <div className=\"profile-field\">\r\n                <label>Date of Birth:</label>\r\n                <input type=\"text\" value={learnerData.dob} readOnly />\r\n            </div>\r\n            <div className=\"profile-field\">\r\n                <label>Email:</label>\r\n                    <input\r\n                        type=\"text\"\r\n                        value={learnerData.email} readOnly\r\n                    />\r\n            </div>\r\n            <div className=\"profile-field\">\r\n                <label>Mobile Number:</label>\r\n               \r\n                    <input\r\n                        type=\"text\"\r\nvalue={learnerData.mobile_no} readOnly                    \r\n                    />\r\n            </div>\r\n            <div className=\"profile-field\">\r\n                <label>Highest Qualification:</label>\r\n              \r\n                    <input\r\n                        type=\"text\"\r\n                        name=\"highest_qualification\"\r\n                       value={learnerData.highest_qualification} readOnly\r\n                    />\r\n            </div>\r\n            <div className=\"profile-field\">\r\n                <label>Username:</label>\r\n               \r\n                    <input\r\n                        type=\"text\"\r\n                        name=\"username\"\r\n                       value={learnerData.username} readOnly\r\n                    />\r\n            </div>\r\n        </div></div>\r\n    );\r\n}\r\n\r\nexport default LearnerProfile;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}