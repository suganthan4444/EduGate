{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useParams,Navigate}from'react-router-dom';import'./EnrollCourse.css';import api from'./api';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function EnrollCourse(){const{course_id}=useParams();const learner_id=sessionStorage.getItem('learnerId');const[learnerName,setLearnerName]=useState('');const[courseDetails,setCourseDetails]=useState(null);console.log({course_id});useEffect(()=>{async function fetchLearnerName(){try{const response=await api.get(\"/get-learner-name/\".concat(learner_id));const{learner_name}=response.data;setLearnerName(learner_name);}catch(error){console.error('Error fetching learner name:',error);}}fetchLearnerName();},[learner_id]);useEffect(()=>{async function fetchCourseDetails(){try{const response=await api.get(\"/get-course-details/\".concat(course_id));const{data}=response;setCourseDetails(data);}catch(error){console.error('Error fetching course details:',error);}}fetchCourseDetails();},[course_id]);const handleEnroll=async()=>{try{await api.post('/enroll-course/',{learner_id:learner_id,learner_name:learnerName,course_id:course_id,course_name:courseDetails.course_name,educator_id:courseDetails.educator_id,educator_name:courseDetails.educator_name,course_description:courseDetails.course_description,course_duration:courseDetails.course_duration,course_domain:courseDetails.course_domain,course_thumbnail:courseDetails.course_thumbnail_url,course_video_id:courseDetails.course_video_id,course_video:courseDetails.course_video_url,course_exercise_id:courseDetails.course_exercise_id,course_exercise_url:courseDetails.course_exercise_url,course_purchase_status:false});alert('Course purchase requested!');Navigate('/learner-courses');}catch(error){console.error('Error enrolling in course:',error);alert('Failed to enroll in the course. Please try again.');}};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Confirm Enrollment\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Learner Name: \",learnerName]}),courseDetails&&/*#__PURE__*/_jsxs(\"div\",{className:\"enrollcourse\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[\"Course Name: \",courseDetails.course_name]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Course Description: \",courseDetails.course_description]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Course Duration: \",courseDetails.course_duration]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Course Domain: \",courseDetails.course_domain]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Course Thumbnail: \",/*#__PURE__*/_jsx(\"img\",{src:courseDetails.course_thumbnail_url,alt:courseDetails.course_name})]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleEnroll,children:\"Confirm Enroll\"})]})]});}export default EnrollCourse;","map":{"version":3,"names":["React","useState","useEffect","useParams","Navigate","api","jsx","_jsx","jsxs","_jsxs","EnrollCourse","course_id","learner_id","sessionStorage","getItem","learnerName","setLearnerName","courseDetails","setCourseDetails","console","log","fetchLearnerName","response","get","concat","learner_name","data","error","fetchCourseDetails","handleEnroll","post","course_name","educator_id","educator_name","course_description","course_duration","course_domain","course_thumbnail","course_thumbnail_url","course_video_id","course_video","course_video_url","course_exercise_id","course_exercise_url","course_purchase_status","alert","children","className","src","alt","onClick"],"sources":["D:/Sugu/Study Zone/Coding/Code/Projects/Coapps/Final Project/Project EduGate/react-project/src/EnrollCourse.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useParams, Navigate } from 'react-router-dom';\r\nimport './EnrollCourse.css';\r\nimport api from './api';\r\n\r\nfunction EnrollCourse() {\r\n  const { course_id } = useParams(); \r\n  const learner_id = sessionStorage.getItem('learnerId');\r\n  const [learnerName, setLearnerName] = useState('');\r\n  const [courseDetails, setCourseDetails] = useState(null);\r\n  console.log({course_id})\r\n\r\n  useEffect(() => {\r\n    async function fetchLearnerName() {\r\n      try {\r\n        const response = await api.get(`/get-learner-name/${learner_id}`);\r\n        const { learner_name } = response.data;\r\n        setLearnerName(learner_name); \r\n      } catch (error) {\r\n        console.error('Error fetching learner name:', error);\r\n      }\r\n    }\r\n\r\n    fetchLearnerName();\r\n  }, [learner_id]);\r\n\r\n  useEffect(() => {\r\n    async function fetchCourseDetails() {\r\n      try {\r\n        const response = await api.get(`/get-course-details/${course_id}`);\r\n        const { data } = response;\r\n        setCourseDetails(data);\r\n      } catch (error) {\r\n        console.error('Error fetching course details:', error);\r\n      }\r\n    }\r\n\r\n    fetchCourseDetails(); \r\n  }, [course_id]);\r\n\r\n  const handleEnroll = async () => {\r\n    try {\r\n      await api.post('/enroll-course/', {\r\n        learner_id:learner_id,\r\n        learner_name: learnerName,\r\n        course_id:course_id,\r\n        course_name: courseDetails.course_name,\r\n        educator_id: courseDetails.educator_id,\r\n        educator_name: courseDetails.educator_name,\r\n        course_description: courseDetails.course_description,\r\n        course_duration: courseDetails.course_duration,\r\n        course_domain: courseDetails.course_domain,\r\n        course_thumbnail: courseDetails.course_thumbnail_url,\r\n        course_video_id: courseDetails.course_video_id,\r\n        course_video: courseDetails.course_video_url,\r\n        course_exercise_id: courseDetails.course_exercise_id,\r\n        course_exercise_url: courseDetails.course_exercise_url,\r\n        course_purchase_status: false \r\n      });\r\n\r\n      alert('Course purchase requested!');\r\n      Navigate('/learner-courses');\r\n    } catch (error) {\r\n      console.error('Error enrolling in course:', error);\r\n      alert('Failed to enroll in the course. Please try again.');\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <h2>Confirm Enrollment</h2>\r\n      <p>Learner Name: {learnerName}</p>\r\n      {courseDetails && (\r\n        <div className='enrollcourse'>\r\n          <p>Course Name: {courseDetails.course_name}</p>\r\n          <p>Course Description: {courseDetails.course_description}</p>\r\n          <p>Course Duration: {courseDetails.course_duration}</p>\r\n          <p>Course Domain: {courseDetails.course_domain}</p>\r\n          <p>Course Thumbnail: <img src={courseDetails.course_thumbnail_url} alt={courseDetails.course_name} /></p>\r\n          <button onClick={handleEnroll}>Confirm Enroll</button>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default EnrollCourse;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}