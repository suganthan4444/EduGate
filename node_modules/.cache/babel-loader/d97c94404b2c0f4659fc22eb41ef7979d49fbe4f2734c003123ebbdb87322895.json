{"ast":null,"code":"var _jsxFileName = \"D:\\\\Sugu\\\\Code\\\\Projects\\\\Project EduGate\\\\react-project\\\\src\\\\EnrollCourse.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { useParams, Navigate } from 'react-router-dom';\nimport api from './api';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction EnrollCourse() {\n  _s();\n  const {\n    course_id\n  } = useParams(); // Extract learner_id and course_id from URL params\n  const learner_id = sessionStorage.getItem('learnerId');\n  const [learnerName, setLearnerName] = useState('');\n  const [courseDetails, setCourseDetails] = useState(null); // State to store course details\n  console.log({\n    course_id\n  });\n  useEffect(() => {\n    // Fetch learner name based on learner_id\n    async function fetchLearnerName() {\n      try {\n        const response = await api.get(`/get-learner-name/${learner_id}`);\n        const {\n          name\n        } = response.data;\n        setLearnerName(name); // Set learner name in state\n      } catch (error) {\n        console.error('Error fetching learner name:', error);\n      }\n    }\n    fetchLearnerName(); // Call the fetch function\n  }, [learner_id]); // Fetch data when learner_id changes\n\n  useEffect(() => {\n    // Fetch course details based on course_id\n    async function fetchCourseDetails() {\n      try {\n        const response = await api.get(`/get-course-details/${course_id}`);\n        const {\n          data\n        } = response;\n        setCourseDetails(data); // Set fetched course details in state\n      } catch (error) {\n        console.error('Error fetching course details:', error);\n      }\n    }\n    fetchCourseDetails(); // Call the fetch function\n  }, [course_id]); // Fetch data when course_id changes\n\n  const handleEnroll = async () => {\n    try {\n      // Make a POST request to enroll in the course\n      await api.post('/enroll-course/', {\n        learner_id: learner_id,\n        learner_name: {\n          learnerName\n        },\n        course_id: course_id,\n        course_name: courseDetails.course_name,\n        educator_id: courseDetails.educator_id,\n        educator_name: courseDetails.educator_name,\n        course_description: courseDetails.course_description,\n        course_duration: courseDetails.course_duration,\n        course_domain: courseDetails.course_domain,\n        course_thumbnail: courseDetails.course_thumbnail_url,\n        course_video_id: courseDetails.course_video_id,\n        course_video: courseDetails.course_video_url,\n        course_exercise_id: courseDetails.course_exercise_id,\n        course_exercise_url: courseDetails.course_exercise_url,\n        course_purchase_status: false // Initial purchase status\n      });\n      alert('Course purchase requested!');\n      // Redirect to some page after successful enrollment\n      Navigate('/learner-courses');\n    } catch (error) {\n      console.error('Error enrolling in course:', error);\n      alert('Failed to enroll in the course. Please try again.');\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Confirm Enrollment\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: [\"Learner Name: \", learnerName]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 7\n    }, this), courseDetails && /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"Course Name: \", courseDetails.course_name]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"Course Description: \", courseDetails.course_description]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"Course Duration: \", courseDetails.course_duration]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"Course Domain: \", courseDetails.course_domain]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"Course Thumbnail: \", /*#__PURE__*/_jsxDEV(\"img\", {\n          src: courseDetails.course_thumbnail_url,\n          alt: courseDetails.course_name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 32\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleEnroll,\n        children: \"Confirm Enroll\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 73,\n    columnNumber: 5\n  }, this);\n}\n_s(EnrollCourse, \"5JyRYZlmyMw4vaYP2EnXxA61Rz0=\", false, function () {\n  return [useParams];\n});\n_c = EnrollCourse;\nexport default EnrollCourse;\nvar _c;\n$RefreshReg$(_c, \"EnrollCourse\");","map":{"version":3,"names":["React","useState","useEffect","useParams","Navigate","api","jsxDEV","_jsxDEV","EnrollCourse","_s","course_id","learner_id","sessionStorage","getItem","learnerName","setLearnerName","courseDetails","setCourseDetails","console","log","fetchLearnerName","response","get","name","data","error","fetchCourseDetails","handleEnroll","post","learner_name","course_name","educator_id","educator_name","course_description","course_duration","course_domain","course_thumbnail","course_thumbnail_url","course_video_id","course_video","course_video_url","course_exercise_id","course_exercise_url","course_purchase_status","alert","children","fileName","_jsxFileName","lineNumber","columnNumber","src","alt","onClick","_c","$RefreshReg$"],"sources":["D:/Sugu/Code/Projects/Project EduGate/react-project/src/EnrollCourse.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useParams, Navigate } from 'react-router-dom';\r\nimport api from './api';\r\n\r\nfunction EnrollCourse() {\r\n  const { course_id } = useParams(); // Extract learner_id and course_id from URL params\r\n  const learner_id = sessionStorage.getItem('learnerId');\r\n  const [learnerName, setLearnerName] = useState('');\r\n  const [courseDetails, setCourseDetails] = useState(null); // State to store course details\r\n  console.log({course_id})\r\n\r\n  useEffect(() => {\r\n    // Fetch learner name based on learner_id\r\n    async function fetchLearnerName() {\r\n      try {\r\n        const response = await api.get(`/get-learner-name/${learner_id}`);\r\n        const { name } = response.data;\r\n        setLearnerName(name); // Set learner name in state\r\n      } catch (error) {\r\n        console.error('Error fetching learner name:', error);\r\n      }\r\n    }\r\n\r\n    fetchLearnerName(); // Call the fetch function\r\n  }, [learner_id]); // Fetch data when learner_id changes\r\n\r\n  useEffect(() => {\r\n    // Fetch course details based on course_id\r\n    async function fetchCourseDetails() {\r\n      try {\r\n        const response = await api.get(`/get-course-details/${course_id}`);\r\n        const { data } = response;\r\n        setCourseDetails(data); // Set fetched course details in state\r\n      } catch (error) {\r\n        console.error('Error fetching course details:', error);\r\n      }\r\n    }\r\n\r\n    fetchCourseDetails(); // Call the fetch function\r\n  }, [course_id]); // Fetch data when course_id changes\r\n\r\n  const handleEnroll = async () => {\r\n    try {\r\n      // Make a POST request to enroll in the course\r\n      await api.post('/enroll-course/', {\r\n        learner_id:learner_id,\r\n        learner_name: {learnerName},\r\n        course_id:course_id,\r\n        course_name: courseDetails.course_name,\r\n        educator_id: courseDetails.educator_id,\r\n        educator_name: courseDetails.educator_name,\r\n        course_description: courseDetails.course_description,\r\n        course_duration: courseDetails.course_duration,\r\n        course_domain: courseDetails.course_domain,\r\n        course_thumbnail: courseDetails.course_thumbnail_url,\r\n        course_video_id: courseDetails.course_video_id,\r\n        course_video: courseDetails.course_video_url,\r\n        course_exercise_id: courseDetails.course_exercise_id,\r\n        course_exercise_url: courseDetails.course_exercise_url,\r\n        course_purchase_status: false // Initial purchase status\r\n      });\r\n\r\n      alert('Course purchase requested!');\r\n      // Redirect to some page after successful enrollment\r\n      Navigate('/learner-courses');\r\n    } catch (error) {\r\n      console.error('Error enrolling in course:', error);\r\n      alert('Failed to enroll in the course. Please try again.');\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <h2>Confirm Enrollment</h2>\r\n      <p>Learner Name: {learnerName}</p>\r\n      {courseDetails && (\r\n        <div>\r\n          <p>Course Name: {courseDetails.course_name}</p>\r\n          <p>Course Description: {courseDetails.course_description}</p>\r\n          <p>Course Duration: {courseDetails.course_duration}</p>\r\n          <p>Course Domain: {courseDetails.course_domain}</p>\r\n          <p>Course Thumbnail: <img src={courseDetails.course_thumbnail_url} alt={courseDetails.course_name} /></p>\r\n          <button onClick={handleEnroll}>Confirm Enroll</button>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default EnrollCourse;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}