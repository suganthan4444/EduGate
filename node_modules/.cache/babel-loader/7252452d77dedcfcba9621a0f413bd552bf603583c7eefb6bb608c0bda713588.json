{"ast":null,"code":"import React,{useState,useEffect}from'react';import api from'./api';import'./AdminCourses.css';import{useNavigate}from'react-router-dom';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function AdminCourses(){const[requestedCourses,setRequestedCourses]=useState([]);const[releasedCourses,setReleasedCourses]=useState([]);const[csrfToken,setCsrfToken]=useState('');const navigate=useNavigate();useEffect(()=>{async function fetchCsrfToken(){try{const response=await api.get('/get-learner-csrf-token/');setCsrfToken(response.data.csrfToken);}catch(error){console.error('Error fetching CSRF token:',error);}}fetchCsrfToken();},[]);useEffect(()=>{fetchCourses();},[]);const fetchCourses=async()=>{try{const response=await api.get('/admin-courses');const courses=response.data;const requested=courses.filter(course=>!course.course_release_status&&!course.course_reject_status);const released=courses.filter(course=>course.course_release_status);setRequestedCourses(requested);setReleasedCourses(released);}catch(error){console.error('Error fetching courses:',error);}};const handleRelease=async courseId=>{try{const response=await api.post(`/release-course/${courseId}/`,{headers:{'X-CSRFToken':csrfToken}});fetchCourses();alert(response.data.message);}catch(error){console.error('Error releasing course:',error);alert('Error releasing course: '+error.message);}};const handleReject=async courseId=>{try{await api.post(`/reject-course/${courseId}`,{headers:{'X-CSRFToken':csrfToken}});fetchCourses();}catch(error){console.error('Error rejecting course:',error);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"admin-courses-container\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Release Requested Courses\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"table\",{children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Course ID\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Course Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Educator ID\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Educator Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Price\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Actions\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:requestedCourses.map(course=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:course.course_id}),/*#__PURE__*/_jsx(\"td\",{onClick:()=>navigate(`/course-inlook/${course.course_id}`),className:\"navi\",children:course.course_name}),/*#__PURE__*/_jsx(\"td\",{children:course.educator_id}),/*#__PURE__*/_jsx(\"td\",{children:course.educator_name}),/*#__PURE__*/_jsx(\"td\",{children:course.course_price}),/*#__PURE__*/_jsxs(\"td\",{className:\"buttons\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"release\",onClick:()=>handleRelease(course.course_id),children:\"Release\"}),/*#__PURE__*/_jsx(\"button\",{className:\"reject\",onClick:()=>handleReject(course.course_id),children:\"Reject\"})]})]},course.course_id))})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"h2\",{children:\"Released Courses\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"table\",{children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Course ID\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Course Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Educator ID\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Educator Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Price\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:releasedCourses.map(course=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:course.course_id}),/*#__PURE__*/_jsx(\"td\",{onClick:()=>navigate(`/course-inlook/${course.course_id}`),className:\"navi\",children:course.course_name}),/*#__PURE__*/_jsx(\"td\",{children:course.educator_id}),/*#__PURE__*/_jsx(\"td\",{children:course.educator_name}),/*#__PURE__*/_jsx(\"td\",{children:course.course_price})]},course.course_id))})]})]});}export default AdminCourses;","map":{"version":3,"names":["React","useState","useEffect","api","useNavigate","jsx","_jsx","jsxs","_jsxs","AdminCourses","requestedCourses","setRequestedCourses","releasedCourses","setReleasedCourses","csrfToken","setCsrfToken","navigate","fetchCsrfToken","response","get","data","error","console","fetchCourses","courses","requested","filter","course","course_release_status","course_reject_status","released","handleRelease","courseId","post","headers","alert","message","handleReject","className","children","map","course_id","onClick","course_name","educator_id","educator_name","course_price"],"sources":["D:/Sugu/Study Zone/Coding/Code/Projects/Coapps/Final Project/Project EduGate/react-project/src/AdminCourses.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport api from './api';\r\nimport './AdminCourses.css';\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\nfunction AdminCourses() {\r\n    const [requestedCourses, setRequestedCourses] = useState([]);\r\n    const [releasedCourses, setReleasedCourses] = useState([]);\r\n    const [csrfToken, setCsrfToken] = useState('');\r\n    const navigate= useNavigate();\r\n\r\n    useEffect(() => {\r\n        async function fetchCsrfToken() {\r\n            try {\r\n                const response = await api.get('/get-learner-csrf-token/');\r\n                setCsrfToken(response.data.csrfToken);\r\n            } catch (error) {\r\n                console.error('Error fetching CSRF token:', error);\r\n            }\r\n        }\r\n\r\n        fetchCsrfToken();\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        fetchCourses();\r\n    }, []);\r\n\r\n    const fetchCourses = async () => {\r\n        try {\r\n            const response = await api.get('/admin-courses');\r\n            const courses = response.data;\r\n            const requested = courses.filter(course => !course.course_release_status && !course.course_reject_status);\r\n            const released = courses.filter(course => course.course_release_status);\r\n            setRequestedCourses(requested);\r\n            setReleasedCourses(released);\r\n        } catch (error) {\r\n            console.error('Error fetching courses:', error);\r\n        }\r\n    };\r\n\r\n    const handleRelease = async (courseId) => {\r\n        try {\r\n            const response = await api.post(`/release-course/${courseId}/`, {headers: {\r\n                'X-CSRFToken': csrfToken\r\n            }});\r\n            fetchCourses(); \r\n            alert(response.data.message);\r\n        } catch (error) {\r\n            console.error('Error releasing course:', error);\r\n            alert('Error releasing course: ' + error.message);\r\n        }\r\n    };\r\n    \r\n\r\n    const handleReject = async (courseId) => {\r\n        try {\r\n            await api.post(`/reject-course/${courseId}`, {headers: {\r\n                'X-CSRFToken': csrfToken\r\n            }});\r\n            fetchCourses();\r\n        } catch (error) {\r\n            console.error('Error rejecting course:', error);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"admin-courses-container\">\r\n            <h2>Release Requested Courses</h2><br></br>\r\n            <table>\r\n                <thead>\r\n                    <tr>\r\n                        <th>Course ID</th>\r\n                        <th>Course Name</th>\r\n                        <th>Educator ID</th>\r\n                        <th>Educator Name</th>\r\n                        <th>Price</th>\r\n                        <th>Actions</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    {requestedCourses.map(course => (\r\n                        <tr key={course.course_id}>\r\n                            <td >{course.course_id}</td>\r\n                            <td onClick={() => navigate(`/course-inlook/${course.course_id}`)} className='navi'>{course.course_name}</td>\r\n                            <td>{course.educator_id}</td>\r\n                            <td>{course.educator_name}</td>\r\n                            <td>{course.course_price}</td>\r\n                            <td className=\"buttons\">\r\n                                <button className=\"release\" onClick={() => handleRelease(course.course_id)}>Release</button>\r\n                                <button className=\"reject\" onClick={() => handleReject(course.course_id)}>Reject</button>\r\n                            </td>\r\n                        </tr>\r\n                    ))}\r\n                </tbody>\r\n            </table><br></br>\r\n\r\n            <h2>Released Courses</h2><br></br>\r\n            <table>\r\n                <thead>\r\n                    <tr>\r\n                        <th>Course ID</th>\r\n                        <th>Course Name</th>\r\n                        <th>Educator ID</th>\r\n                        <th>Educator Name</th>\r\n                        <th>Price</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    {releasedCourses.map(course => (\r\n                        <tr key={course.course_id}>\r\n                            <td>{course.course_id}</td>\r\n                            <td onClick={() => navigate(`/course-inlook/${course.course_id}`)} className='navi'>{course.course_name}</td>\r\n                            <td>{course.educator_id}</td>\r\n                            <td>{course.educator_name}</td>\r\n                            <td>{course.course_price}</td>\r\n                        </tr>\r\n                    ))}\r\n                </tbody>\r\n            </table>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default AdminCourses;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}